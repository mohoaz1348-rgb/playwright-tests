{"uid":"42caed3f763cfbf4","name":"check images on page","fullName":"tests.test_1#test_images","historyId":"6ec5aa2eff14a2aeb8d1a2ef2594a7b8","time":{"start":1771866764433,"stop":1771866764847,"duration":414},"status":"failed","statusMessage":"AssertionError: Файл картинки не найден или не может быть отрисован","statusTrace":"base_page = <pages.base_page.BasePage object at 0x7f6f0a5aed70>\n\n    @allure.title(\"check images on page\")\n    def test_images(base_page: BasePage):\n        base_page.visit(\"broken_images\")\n        image = Image(base_page.page, \"img\", \"some image\")\n        count = base_page.page.locator(\"img\").count()\n        i = 0\n        while i < count:\n>           image.check_visible(i)\n\ntests/test_1.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <elements.image.Image object at 0x7f6f0a916440>, nth = 1, kwargs = {}\nstep = 'Checking that image \"some image\" is visible'\nlocator = <Locator frame=<Frame name= url='https://the-internet.herokuapp.com/broken_images'> selector='img >> nth=1'>\nis_loaded = False\n\n    def check_visible(self, nth: int = 0, **kwargs):\n        step = f'Checking that {self.type_of} \"{self.name}\" is visible'\n    \n        with allure.step(step):\n            locator = self.get_locator(nth, **kwargs)\n            logger.info(step)\n            expect(locator).to_be_visible()\n            # Проверяем, что картинка не \"битая\"\n            is_loaded = locator.evaluate(\n                \"node => node.complete && node.naturalWidth > 0\"\n            )\n            assert (\n>               is_loaded is True\n            ), \"Файл картинки не найден или не может быть отрисован\"\nE           AssertionError: Файл картинки не найден или не может быть отрисован\n\nelements/image.py:26: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1771866762919,"stop":1771866762919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1771866762919,"stop":1771866762919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1771866762919,"stop":1771866762919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1771866762919,"stop":1771866763310,"duration":391},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1771866762919,"stop":1771866762919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"settings","time":{"start":1771866763310,"stop":1771866763313,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_page","time":{"start":1771866764339,"stop":1771866764432,"duration":93},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_page","time":{"start":1771866764432,"stop":1771866764432,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Файл картинки не найден или не может быть отрисован","statusTrace":"base_page = <pages.base_page.BasePage object at 0x7f6f0a5aed70>\n\n    @allure.title(\"check images on page\")\n    def test_images(base_page: BasePage):\n        base_page.visit(\"broken_images\")\n        image = Image(base_page.page, \"img\", \"some image\")\n        count = base_page.page.locator(\"img\").count()\n        i = 0\n        while i < count:\n>           image.check_visible(i)\n\ntests/test_1.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <elements.image.Image object at 0x7f6f0a916440>, nth = 1, kwargs = {}\nstep = 'Checking that image \"some image\" is visible'\nlocator = <Locator frame=<Frame name= url='https://the-internet.herokuapp.com/broken_images'> selector='img >> nth=1'>\nis_loaded = False\n\n    def check_visible(self, nth: int = 0, **kwargs):\n        step = f'Checking that {self.type_of} \"{self.name}\" is visible'\n    \n        with allure.step(step):\n            locator = self.get_locator(nth, **kwargs)\n            logger.info(step)\n            expect(locator).to_be_visible()\n            # Проверяем, что картинка не \"битая\"\n            is_loaded = locator.evaluate(\n                \"node => node.complete && node.naturalWidth > 0\"\n            )\n            assert (\n>               is_loaded is True\n            ), \"Файл картинки не найден или не может быть отрисован\"\nE           AssertionError: Файл картинки не найден или не может быть отрисован\n\nelements/image.py:26: AssertionError","steps":[{"name":"Opening the URL - \"broken_images\"","time":{"start":1771866764433,"stop":1771866764773,"duration":340},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Checking that image \"some image\" is visible","time":{"start":1771866764797,"stop":1771866764833,"duration":36},"status":"passed","steps":[{"name":"Getting locator with \"img\" for image at index 0","time":{"start":1771866764797,"stop":1771866764797,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Checking that image \"some image\" is visible","time":{"start":1771866764833,"stop":1771866764847,"duration":14},"status":"failed","statusMessage":"AssertionError: Файл картинки не найден или не может быть отрисован\n","statusTrace":"  File \"/home/runner/work/playwright-tests/playwright-tests/elements/image.py\", line 26, in check_visible\n    is_loaded is True\n","steps":[{"name":"Getting locator with \"img\" for image at index 1","time":{"start":1771866764833,"stop":1771866764833,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"867b337a44f76d31","name":"log","source":"867b337a44f76d31.txt","type":"text/plain","size":388}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":5,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"browser_page::0","time":{"start":1771866764893,"stop":1771866765028,"duration":135},"status":"passed","steps":[],"attachments":[{"uid":"92fd918b850883fe","name":"trace","source":"92fd918b850883fe.zip","type":"application/zip","size":165737},{"uid":"ebed23a22cae8384","name":"video","source":"ebed23a22cae8384.webm","type":"video/webm","size":12885}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"playwright::0","time":{"start":1771866788787,"stop":1771866788808,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_1"},{"name":"host","value":"runnervmwffz4"},{"name":"thread","value":"3092-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_1"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_page","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"42caed3f763cfbf4.json","parameterValues":["'chromium'"]}